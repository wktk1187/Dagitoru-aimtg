/* esm.sh - @supabase/postgrest-js@1.19.4 */
import*as __0$ from"/@supabase/node-fetch@^2.6.14?target=denonext";var require=n=>{const e=m=>typeof m.default<"u"?m.default:m,c=m=>Object.assign({__esModule:true},m);switch(n){case"@supabase/node-fetch":return c(__0$);default:console.error('module "'+n+'" not found');return null;}};
var ee=Object.create;var F=Object.defineProperty;var te=Object.getOwnPropertyDescriptor;var se=Object.getOwnPropertyNames;var re=Object.getPrototypeOf,ie=Object.prototype.hasOwnProperty;var ae=(s=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(s,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):s)(function(s){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+s+'" is not supported')});var f=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var ne=(s,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of se(e))!ie.call(s,r)&&r!==t&&F(s,r,{get:()=>e[r],enumerable:!(i=te(e,r))||i.enumerable});return s};var he=(s,e,t)=>(t=s!=null?ee(re(s)):{},ne(e||!s||!s.__esModule?F(t,"default",{value:s,enumerable:!0}):t,s));var k=f(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var S=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};T.default=S});var B=f(_=>{"use strict";var G=_&&_.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(_,"__esModule",{value:!0});var le=G(ae("@supabase/node-fetch")),ue=G(k()),D=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=le.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let i=this.fetch,r=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var h,n,o;let l=null,u=null,c=null,m=a.status,P=a.statusText;if(a.ok){if(this.method!=="HEAD"){let w=await a.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=w:u=JSON.parse(w))}let g=(h=this.headers.Prefer)===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),O=(n=a.headers.get("content-range"))===null||n===void 0?void 0:n.split("/");g&&O&&O.length>1&&(c=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,c=null,m=406,P="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{let g=await a.text();try{l=JSON.parse(g),Array.isArray(l)&&a.status===404&&(u=[],l=null,m=200,P="OK")}catch{a.status===404&&g===""?(m=204,P="No Content"):l={message:g}}if(l&&this.isMaybeSingle&&(!((o=l?.details)===null||o===void 0)&&o.includes("0 rows"))&&(l=null,m=200,P="OK"),l&&this.shouldThrowOnError)throw new ue.default(l)}return{error:l,data:u,count:c,status:m,statusText:P}});return this.shouldThrowOnError||(r=r.catch(a=>{var h,n,o;return{error:{message:`${(h=a?.name)!==null&&h!==void 0?h:"FetchError"}: ${a?.message}`,details:`${(n=a?.stack)!==null&&n!==void 0?n:""}`,hint:"",code:`${(o=a?.code)!==null&&o!==void 0?o:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};_.default=D});var H=f(y=>{"use strict";var oe=y&&y.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(y,"__esModule",{value:!0});var de=oe(B()),M=class extends de.default{select(e){let t=!1,i=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:i,foreignTable:r,referencedTable:a=r}={}){let h=a?`${a}.order`:"order",n=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${n?`${n},`:""}${e}.${t?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:i=t}={}){let r=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:i,referencedTable:r=i}={}){let a=typeof r>"u"?"offset":`${r}.offset`,h=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(h,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:i=!1,buffers:r=!1,wal:a=!1,format:h="text"}={}){var n;let o=[e?"analyze":null,t?"verbose":null,i?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=(n=this.headers.Accept)!==null&&n!==void 0?n:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${l}"; options=${o};`,h==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};y.default=M});var E=f($=>{"use strict";var ce=$&&$.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty($,"__esModule",{value:!0});var fe=ce(H()),C=class extends fe.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){let i=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${i})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:i,type:r}={}){let a="";r==="plain"?a="pl":r==="phrase"?a="ph":r==="websearch"&&(a="w");let h=i===void 0?"":`(${i})`;return this.url.searchParams.append(e,`${a}fts${h}.${t}`),this}match(e){return Object.entries(e).forEach(([t,i])=>{this.url.searchParams.append(t,`eq.${i}`)}),this}not(e,t,i){return this.url.searchParams.append(e,`not.${t}.${i}`),this}or(e,{foreignTable:t,referencedTable:i=t}={}){let r=i?`${i}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,i){return this.url.searchParams.append(e,`${t}.${i}`),this}};$.default=C});var R=f(v=>{"use strict";var pe=v&&v.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(v,"__esModule",{value:!0});var j=pe(E()),N=class{constructor(e,{headers:t={},schema:i,fetch:r}){this.url=e,this.headers=t,this.schema=i,this.fetch=r}select(e,{head:t=!1,count:i}={}){let r=t?"HEAD":"GET",a=!1,h=(e??"*").split("").map(n=>/\s/.test(n)&&!a?"":(n==='"'&&(a=!a),n)).join("");return this.url.searchParams.set("select",h),i&&(this.headers.Prefer=`count=${i}`),new j.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:i=!0}={}){let r="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),t&&a.push(`count=${t}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){let h=e.reduce((n,o)=>n.concat(Object.keys(o)),[]);if(h.length>0){let n=[...new Set(h)].map(o=>`"${o}"`);this.url.searchParams.set("columns",n.join(","))}}return new j.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:i=!1,count:r,defaultToNull:a=!0}={}){let h="POST",n=[`resolution=${i?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&n.push(this.headers.Prefer),r&&n.push(`count=${r}`),a||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){let o=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(o.length>0){let l=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new j.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){let i="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new j.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){let t="DELETE",i=[];return e&&i.push(`count=${e}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new j.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};v.default=N});var L=f(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.version=void 0;b.version="0.0.0-automated"});var J=f(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.DEFAULT_HEADERS=void 0;var me=L();q.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${me.version}`}});var U=f(A=>{"use strict";var Q=A&&A.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(A,"__esModule",{value:!0});var Pe=Q(R()),ge=Q(E()),_e=J(),x=class s{constructor(e,{headers:t={},schema:i,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},_e.DEFAULT_HEADERS),t),this.schemaName=i,this.fetch=r}from(e){let t=new URL(`${this.url}/${e}`);return new Pe.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new s(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:i=!1,get:r=!1,count:a}={}){let h,n=new URL(`${this.url}/rpc/${e}`),o;i||r?(h=i?"HEAD":"GET",Object.entries(t).filter(([u,c])=>c!==void 0).map(([u,c])=>[u,Array.isArray(c)?`{${c.join(",")}}`:`${c}`]).forEach(([u,c])=>{n.searchParams.append(u,c)})):(h="POST",o=t);let l=Object.assign({},this.headers);return a&&(l.Prefer=`count=${a}`),new ge.default({method:h,url:n,headers:l,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}};A.default=x});var Y=f(d=>{"use strict";var p=d&&d.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});d.PostgrestError=d.PostgrestBuilder=d.PostgrestTransformBuilder=d.PostgrestFilterBuilder=d.PostgrestQueryBuilder=d.PostgrestClient=void 0;var I=p(U());d.PostgrestClient=I.default;var K=p(R());d.PostgrestQueryBuilder=K.default;var z=p(E());d.PostgrestFilterBuilder=z.default;var V=p(H());d.PostgrestTransformBuilder=V.default;var X=p(B());d.PostgrestBuilder=X.default;var W=p(k());d.PostgrestError=W.default;d.default={PostgrestClient:I.default,PostgrestQueryBuilder:K.default,PostgrestFilterBuilder:z.default,PostgrestTransformBuilder:V.default,PostgrestBuilder:X.default,PostgrestError:W.default}});var Z=he(Y(),1),{PostgrestClient:ye,PostgrestQueryBuilder:$e,PostgrestFilterBuilder:je,PostgrestTransformBuilder:ve,PostgrestBuilder:Ae,PostgrestError:Oe}=Z.default;var Ce={PostgrestClient:ye,PostgrestQueryBuilder:$e,PostgrestFilterBuilder:je,PostgrestTransformBuilder:ve,PostgrestBuilder:Ae,PostgrestError:Oe};export{Ae as PostgrestBuilder,ye as PostgrestClient,Oe as PostgrestError,je as PostgrestFilterBuilder,$e as PostgrestQueryBuilder,ve as PostgrestTransformBuilder,Ce as default};
//# sourceMappingURL=postgrest-js.mjs.map
// denoCacheMetadata={"headers":{"content-type":"application/javascript; charset=utf-8","last-modified":"Sat, 29 Mar 2025 14:48:44 GMT","server":"cloudflare","date":"Mon, 19 May 2025 00:30:27 GMT","access-control-allow-origin":"*","vary":"Accept-Encoding","cf-ray":"941f7c5ccf6296a6-KIX","alt-svc":"h3=\":443\"; ma=86400","cache-control":"public, max-age=31536000, immutable","age":"261090","cf-cache-status":"HIT"},"url":"https://esm.sh/@supabase/postgrest-js@1.19.4/denonext/postgrest-js.mjs","time":1747614627}